<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>莫蘭迪配色工坊 | Morandi Palette Studio</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'DM Sans', sans-serif; background: #f0eeeb; color: #3a3632; min-height: 100vh; -webkit-font-smoothing: antialiased; }
.page { max-width: 1200px; margin: 0 auto; padding: 48px 24px 80px; }

/* Header */
.header { text-align: center; margin-bottom: 48px; }
.header h1 { font-family: 'Fraunces', serif; font-weight: 700; font-size: 2.4rem; letter-spacing: -0.02em; color: #2a2520; margin-bottom: 4px; }
.header .subtitle { font-family: 'Fraunces', serif; font-weight: 400; font-size: 1rem; color: #8a8078; letter-spacing: 0.15em; text-transform: uppercase; margin-bottom: 12px; }
.header .desc { font-size: 0.88rem; color: #7a7268; max-width: 560px; margin: 0 auto; line-height: 1.7; }

/* Section Title */
.stitle { font-family: 'Fraunces', serif; font-weight: 500; font-size: 1.05rem; color: #5a5048; margin-bottom: 14px; display: flex; align-items: center; gap: 10px; }
.stitle::after { content: ''; flex: 1; height: 1px; background: #ddd8d2; }

/* Theme Swatches */
.themes { display: flex; gap: 14px; justify-content: center; flex-wrap: wrap; margin-bottom: 40px; }
.swatch { cursor: pointer; width: 155px; border-radius: 12px; overflow: hidden; background: #fff; box-shadow: 0 1px 4px rgba(0,0,0,0.06); transition: transform 0.2s, box-shadow 0.2s; border: 2.5px solid transparent; }
.swatch:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.08); }
.swatch.active { border-color: #5a5048; box-shadow: 0 6px 24px rgba(0,0,0,0.12); }
.swatch-color { height: 72px; position: relative; }
.swatch-color::after { content: ''; position: absolute; inset: 0; background: radial-gradient(ellipse at 30% 35%, rgba(255,255,255,0.18) 0%, transparent 60%), radial-gradient(ellipse at 75% 70%, rgba(0,0,0,0.05) 0%, transparent 50%); }
.swatch-info { padding: 9px 11px; }
.swatch-name { font-weight: 600; font-size: 0.72rem; color: #3a3632; }
.swatch-zh { font-size: 0.78rem; color: #5a5652; margin-bottom: 3px; }
.swatch-hex { font-size: 0.67rem; font-family: 'SF Mono', 'Cascadia Code', monospace; color: #9a9490; }
.swatch-badge { position: absolute; top: 6px; right: 6px; background: rgba(255,255,255,0.88); backdrop-filter: blur(4px); font-size: 0.58rem; font-weight: 600; padding: 2px 7px; border-radius: 4px; color: #5a5048; z-index: 1; }

/* Color Scale */
.color-scale { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-bottom: 28px; padding: 18px; background: #fff; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.sc-item { display: flex; flex-direction: column; align-items: center; gap: 5px; min-width: 52px; }
.sc-dot { width: 32px; height: 32px; border-radius: 50%; border: 1px solid rgba(0,0,0,0.07); transition: background-color 0.4s; }
.sc-label { font-size: 0.6rem; color: #8a8078; text-align: center; }
.sc-div { width: 1px; background: #e8e4de; align-self: stretch; margin: 4px 2px; }

/* Preview Frame */
.preview-frame { border-radius: 12px; overflow: hidden; box-shadow: 0 4px 24px rgba(0,0,0,0.08), 0 1px 4px rgba(0,0,0,0.04); display: flex; height: 500px; margin-bottom: 32px; }

/* Sidebar */
.pv-sb { width: 200px; min-width: 200px; background: var(--sidebar); color: var(--sidebar-foreground); display: flex; flex-direction: column; transition: background-color 0.4s, color 0.4s; }
.pv-sb-logo { padding: 14px; border-bottom: 1px solid var(--sidebar-border); font-weight: 600; font-size: 0.8rem; letter-spacing: 0.06em; display: flex; align-items: center; gap: 8px; transition: border-color 0.4s; }
.pv-sb-logo .ico { width: 22px; height: 22px; background: var(--sidebar-primary); border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 0.65rem; font-weight: 700; color: var(--sidebar-primary-foreground); transition: background-color 0.4s; }
.pv-nav { flex: 1; padding: 6px 8px; overflow: hidden; }
.pv-ni { display: flex; align-items: center; gap: 7px; padding: 6px 9px; border-radius: 6px; font-size: 0.75rem; cursor: default; position: relative; transition: background-color 0.4s, color 0.4s; }
.pv-ni.on { background: var(--sidebar-accent); color: var(--sidebar-accent-foreground); font-weight: 500; }
.pv-ni.on::before { content: ''; position: absolute; top: 0; left: 0; bottom: 0; width: 3px; border-radius: 6px 0 0 6px; background: var(--sidebar-primary); transition: background-color 0.4s; }
.pv-ni svg { width: 14px; height: 14px; opacity: 0.7; flex-shrink: 0; }
.pv-ng { font-size: 0.65rem; font-weight: 500; padding: 10px 9px 3px; opacity: 0.4; letter-spacing: 0.03em; }
.pv-ns { padding-left: 10px; }

/* Main */
.pv-mn { flex: 1; background: var(--background); color: var(--foreground); padding: 22px; overflow-y: auto; transition: background-color 0.4s, color 0.4s; }
.pv-hd { margin-bottom: 16px; }
.pv-hd h2 { font-size: 1.1rem; font-weight: 600; margin-bottom: 1px; }
.pv-hd p { font-size: 0.75rem; opacity: 0.55; }

/* Stat Cards */
.pv-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 16px; }
.pv-sc { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 12px 14px; transition: background-color 0.4s, border-color 0.4s; }
.pv-sc-l { font-size: 0.7rem; opacity: 0.55; margin-bottom: 3px; }
.pv-sc-v { font-size: 1.4rem; font-weight: 700; letter-spacing: -0.02em; }
.pv-sc-dot { width: 7px; height: 7px; border-radius: 50%; display: inline-block; margin-right: 5px; }

/* Form */
.pv-form { display: flex; gap: 7px; margin-bottom: 16px; }
.pv-inp { flex: 1; padding: 7px 11px; border-radius: 6px; border: 1px solid var(--input); background: var(--background); color: var(--foreground); font-size: 0.78rem; font-family: inherit; outline: none; transition: border-color 0.4s, background-color 0.4s; }
.pv-inp::placeholder { color: var(--muted-foreground); opacity: 0.5; }
.pv-btn { padding: 7px 16px; border-radius: 6px; border: none; font-size: 0.78rem; font-weight: 500; font-family: inherit; cursor: pointer; transition: background-color 0.4s, color 0.4s, opacity 0.15s; white-space: nowrap; }
.pv-btn:hover { opacity: 0.88; }
.pv-bp { background: var(--primary); color: var(--primary-foreground); }
.pv-bs { background: var(--secondary); color: var(--secondary-foreground); }
.pv-bd { background: var(--destructive); color: var(--primary-foreground); }
.pv-bo { background: transparent; color: var(--foreground); border: 1px solid var(--border); }

/* Table */
.pv-tbl { width: 100%; border-collapse: collapse; font-size: 0.75rem; margin-bottom: 16px; }
.pv-tbl th { text-align: left; padding: 7px 9px; font-weight: 500; border-bottom: 1px solid var(--border); color: var(--muted-foreground); font-size: 0.7rem; transition: border-color 0.4s, color 0.4s; }
.pv-tbl td { padding: 7px 9px; border-bottom: 1px solid var(--border); transition: border-color 0.4s; }
.pv-tbl tr:hover td { background: var(--accent); }
.pv-badge { display: inline-flex; padding: 1px 7px; border-radius: 9999px; font-size: 0.65rem; font-weight: 500; }

/* Bottom */
.pv-bot { display: flex; gap: 14px; align-items: flex-start; flex-wrap: wrap; }
.pv-bot-label { font-size: 0.68rem; color: var(--muted-foreground); margin-bottom: 7px; transition: color 0.4s; }
.pv-btn-row { display: flex; gap: 5px; flex-wrap: wrap; }
.pv-charts { display: flex; gap: 6px; }
.pv-cd { width: 22px; height: 22px; border-radius: 5px; transition: background-color 0.4s; }

/* CSS Output */
.output { background: #1e1c1a; border-radius: 12px; overflow: hidden; margin-bottom: 32px; }
.output-hd { display: flex; justify-content: space-between; align-items: center; padding: 10px 18px; background: #28261f; border-bottom: 1px solid #3a3630; }
.output-t { font-size: 0.78rem; color: #a8a098; font-weight: 500; }
.output-cp { padding: 4px 13px; border-radius: 6px; border: 1px solid #4a4640; background: transparent; color: #c8c0b8; font-size: 0.72rem; font-family: inherit; cursor: pointer; transition: background 0.2s, color 0.2s; }
.output-cp:hover { background: #3a3630; color: #e8e0d8; }
.output-cp.ok { background: #3a5a3a; border-color: #4a7a4a; color: #a8d8a8; }
.output-code { padding: 14px 18px; font-family: 'SF Mono', 'Cascadia Code', 'Fira Code', monospace; font-size: 0.7rem; line-height: 1.7; color: #c8c0b8; overflow-x: auto; max-height: 380px; overflow-y: auto; }
.output-code .p { color: #c4a882; }
.output-code .v { color: #a8b8c8; }
.output-code .c { color: #686058; }

/* Comparison */
.cmp { background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.cmp-grid { display: grid; grid-template-columns: 80px repeat(6, 1fr); gap: 6px; align-items: center; }
.cmp-label { font-size: 0.67rem; color: #8a8078; text-align: right; padding-right: 6px; }
.cmp-cell { height: 28px; border-radius: 5px; border: 1px solid rgba(0,0,0,0.04); transition: box-shadow 0.2s; }
.cmp-cell:hover { box-shadow: 0 0 0 2px rgba(0,0,0,0.1); }
.cmp-hdr { font-size: 0.67rem; font-weight: 600; color: #5a5048; text-align: center; padding-bottom: 4px; }
.cmp-cur { font-size: 0.55rem; color: #9a9490; display: block; }

/* GitHub Corner */
.github-corner:hover .octo-arm { animation: octocat-wave 560ms ease-in-out; }
@keyframes octocat-wave { 0%,100% { transform: rotate(0) } 20%,60% { transform: rotate(-25deg) } 40%,80% { transform: rotate(10deg) } }
.github-corner svg { fill: #5a5048; color: #f0eeeb; position: absolute; top: 0; right: 0; border: 0; z-index: 10; }

/* Footer */
.site-footer { text-align: center; padding: 32px 24px 48px; font-size: 0.78rem; color: #8a8078; }
.site-footer a { color: #5a5048; text-decoration: none; }
.site-footer a:hover { text-decoration: underline; }
.site-footer .footer-gh { display: inline-flex; align-items: center; gap: 5px; }
.site-footer .footer-gh svg { width: 16px; height: 16px; fill: currentColor; }

@media (max-width: 900px) {
  .themes { gap: 8px; }
  .swatch { width: 130px; }
  .preview-frame { height: 420px; }
  .pv-sb { width: 160px; min-width: 160px; }
  .pv-stats { grid-template-columns: repeat(2, 1fr); }
}
</style>
</head>
<body>
<a href="https://github.com/lyhcode/palette-studio" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0l115 115h15l12 27 108 108V0z"></path><path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16" fill="currentColor" style="transform-origin:130px 106px"></path><path d="M115 115s4 2 5 0l15-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 2 7 16 4 2 8 5 12 9s7 8 9 12c14 3 16 7 16 7-4 8-9 11-11 12 0 6-2 11-7 16-16 16-30 10-40 2 0 3-1 7-5 11l-12 11c-1 2 1 6 1 6z" fill="currentColor"></path></svg></a>
<div class="page">
  <header class="header">
    <h1>莫蘭迪配色工坊</h1>
    <div class="subtitle">Morandi Palette Studio</div>
    <p class="desc">以喬治・莫蘭迪畫作為靈感的低飽和柔和色系。點選色票預覽不同主題的 UI 效果，並複製 CSS 變數套用至系統。</p>
  </header>

  <div class="themes" id="themes"></div>

  <div id="themed">
    <div class="stitle">色彩階梯</div>
    <div class="color-scale" id="scale"></div>

    <div class="stitle">介面預覽</div>
    <div class="preview-frame">
      <div class="pv-sb">
        <div class="pv-sb-logo"><div class="ico">A</div> Acme Studio</div>
        <div class="pv-nav">
          <div class="pv-ni on">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/></svg>
            總覽儀表板
          </div>
          <div class="pv-ng">專案管理</div>
          <div class="pv-ns">
            <div class="pv-ni"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg> 所有專案</div>
            <div class="pv-ni"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg> 任務清單</div>
            <div class="pv-ni"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg> 數據分析</div>
          </div>
          <div class="pv-ng">系統設定</div>
          <div class="pv-ns">
            <div class="pv-ni"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg> 團隊成員</div>
            <div class="pv-ni"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 1v2m0 18v2m-9-11h2m18 0h2m-3.3-6.7-1.4 1.4M6.7 17.3l-1.4 1.4m0-13.4 1.4 1.4m10.6 10.6 1.4 1.4"/></svg> 偏好設定</div>
          </div>
        </div>
      </div>
      <div class="pv-mn">
        <div class="pv-hd"><h2>總覽儀表板</h2><p>歡迎回來，Kyle</p></div>
        <div class="pv-stats">
          <div class="pv-sc"><div class="pv-sc-l"><span class="pv-sc-dot" style="background:#5a9a7a"></span>進行中專案</div><div class="pv-sc-v">12</div></div>
          <div class="pv-sc"><div class="pv-sc-l"><span class="pv-sc-dot" style="background:#6a8aaa"></span>已完成任務</div><div class="pv-sc-v">128</div></div>
          <div class="pv-sc"><div class="pv-sc-l"><span class="pv-sc-dot" style="background:#b89a5a"></span>團隊成員</div><div class="pv-sc-v">8</div></div>
        </div>
        <div class="pv-form">
          <input class="pv-inp" placeholder="搜尋專案或任務..." readonly>
          <button class="pv-btn pv-bp">新增</button>
          <button class="pv-btn pv-bo">匯出</button>
        </div>
        <table class="pv-tbl">
          <thead><tr><th>專案名稱</th><th>負責人</th><th>進度</th><th>狀態</th></tr></thead>
          <tbody>
            <tr><td>品牌官網改版</td><td>Alice Chen</td><td>85%</td><td><span class="pv-badge" style="background:oklch(0.92 0.03 150);color:oklch(0.35 0.06 150)">進行中</span></td></tr>
            <tr><td>行動 App v2.0</td><td>Bob Lin</td><td>40%</td><td><span class="pv-badge" style="background:oklch(0.92 0.03 80);color:oklch(0.40 0.06 80)">規劃中</span></td></tr>
            <tr><td>後台系統優化</td><td>Carol Wu</td><td>100%</td><td><span class="pv-badge" style="background:oklch(0.92 0.03 230);color:oklch(0.35 0.06 230)">已完成</span></td></tr>
          </tbody>
        </table>
        <div class="pv-bot">
          <div>
            <div class="pv-bot-label">按鈕樣式</div>
            <div class="pv-btn-row">
              <button class="pv-btn pv-bp">主要</button>
              <button class="pv-btn pv-bs">次要</button>
              <button class="pv-btn pv-bd">刪除</button>
              <button class="pv-btn pv-bo">外框</button>
            </div>
          </div>
          <div style="margin-left:auto">
            <div class="pv-bot-label">圖表色</div>
            <div class="pv-charts">
              <div class="pv-cd" style="background:var(--chart-1)"></div>
              <div class="pv-cd" style="background:var(--chart-2)"></div>
              <div class="pv-cd" style="background:var(--chart-3)"></div>
              <div class="pv-cd" style="background:var(--chart-4)"></div>
              <div class="pv-cd" style="background:var(--chart-5)"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="stitle" style="margin-top:28px">CSS 變數輸出</div>
  <div class="output">
    <div class="output-hd">
      <span class="output-t">globals.css &mdash; :root</span>
      <button class="output-cp" id="cpBtn" onclick="copyCSS()">複製 CSS</button>
    </div>
    <pre class="output-code" id="cssOut"></pre>
  </div>

  <div class="stitle">六色對照</div>
  <div class="cmp" id="cmp"></div>
</div>

<footer class="site-footer">
  <a href="https://github.com/lyhcode/palette-studio" class="footer-gh"><svg viewBox="0 0 16 16" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg> lyhcode/palette-studio</a>
  <span style="margin:0 8px">·</span>MIT License
</footer>

<script>
const T = [
  { id:'lavender', n:'Lavender Mist', z:'薰衣草灰', hex:'#BFB1CC', h:305, c:0.055, d:'優雅柔紫' },
  { id:'blue',     n:'Dusty Blue',    z:'霧霾藍',   hex:'#AEC6D4', h:230, c:0.050, d:'靜謐藍灰' },
  { id:'sage',     n:'Sage Green',    z:'鼠尾草綠',  hex:'#ADC7AF', h:150, c:0.055, d:'清新質樸' },
  { id:'taupe',    n:'Warm Taupe',    z:'暖棕灰',   hex:'#D6C9AD', h:55,  c:0.040, d:'經典中性', cur:true },
  { id:'rose',     n:'Dusty Rose',    z:'乾燥玫瑰',  hex:'#DEBDB6', h:35,  c:0.055, d:'柔暖婉約' },
  { id:'mauve',    n:'Mauve Pink',    z:'灰粉紫',   hex:'#D9BDC5', h:350, c:0.050, d:'細膩浪漫' },
];

function gen(h, c) {
  const f = v => v.toFixed(3);
  return {
    '--background':                `oklch(0.96 0.004 ${h})`,
    '--foreground':                `oklch(0.20 0.010 ${h})`,
    '--card':                      `oklch(0.99 0.002 ${h})`,
    '--card-foreground':           `oklch(0.20 0.010 ${h})`,
    '--popover':                   `oklch(0.99 0.002 ${h})`,
    '--popover-foreground':        `oklch(0.20 0.010 ${h})`,
    '--primary':                   `oklch(0.52 ${f(c)} ${h})`,
    '--primary-foreground':        `oklch(0.98 0 0)`,
    '--secondary':                 `oklch(0.88 0.008 ${h})`,
    '--secondary-foreground':      `oklch(0.28 0.012 ${h})`,
    '--muted':                     `oklch(0.92 0.005 ${h})`,
    '--muted-foreground':          `oklch(0.52 0.010 ${h})`,
    '--accent':                    `oklch(0.94 0.008 ${h})`,
    '--accent-foreground':         `oklch(0.35 0.025 ${h})`,
    '--destructive':               `oklch(0.55 0.12 27)`,
    '--border':                    `oklch(0.90 0.005 ${h})`,
    '--input':                     `oklch(0.88 0.006 ${h})`,
    '--ring':                      `oklch(0.52 ${f(c)} ${h})`,
    '--chart-1':                   `oklch(0.55 0.06 ${(h+295)%360})`,
    '--chart-2':                   `oklch(0.60 0.06 ${(h+95)%360})`,
    '--chart-3':                   `oklch(0.55 0.06 ${(h+175)%360})`,
    '--chart-4':                   `oklch(0.57 0.05 ${h})`,
    '--chart-5':                   `oklch(0.58 0.06 ${(h+45)%360})`,
    '--sidebar':                   `oklch(0.93 0.008 ${h})`,
    '--sidebar-foreground':        `oklch(0.35 0.015 ${h})`,
    '--sidebar-primary':           `oklch(0.52 ${f(c)} ${h})`,
    '--sidebar-primary-foreground':`oklch(0.98 0 0)`,
    '--sidebar-accent':            `oklch(0.88 0.012 ${h})`,
    '--sidebar-accent-foreground': `oklch(0.25 0.012 ${h})`,
    '--sidebar-border':            `oklch(0.87 0.008 ${h})`,
    '--sidebar-ring':              `oklch(0.52 ${f(c)} ${h})`,
  };
}

// Build swatches
const themesEl = document.getElementById('themes');
T.forEach((t, i) => {
  const el = document.createElement('div');
  el.className = 'swatch';
  el.onclick = () => sel(i);
  el.innerHTML = `<div class="swatch-color" style="background:${t.hex}">${t.cur?'<div class="swatch-badge">目前使用</div>':''}</div><div class="swatch-info"><div class="swatch-name">${t.n}</div><div class="swatch-zh">${t.z}</div><div class="swatch-hex">${t.hex} · ${t.d}</div></div>`;
  themesEl.appendChild(el);
});

// Scale config
const SC = [
  ['--background','背景'],['--card','卡片'],['--muted','靜音'],['--border','邊框'],['--input','輸入'],
  null,
  ['--primary','主色'],['--accent','強調'],['--ring','聚焦環'],
  null,
  ['--sidebar','側欄'],['--sidebar-primary','側欄主色'],['--sidebar-accent','側欄強調'],
  null,
  ['--destructive','警示'],
];

function buildScale(vars) {
  const el = document.getElementById('scale');
  el.innerHTML = '';
  SC.forEach(s => {
    if (!s) { const d = document.createElement('div'); d.className = 'sc-div'; el.appendChild(d); return; }
    const d = document.createElement('div');
    d.className = 'sc-item';
    d.innerHTML = `<div class="sc-dot" style="background:${vars[s[0]]}"></div><div class="sc-label">${s[1]}</div>`;
    el.appendChild(d);
  });
}

let cur = 3;
function sel(i) {
  cur = i;
  const t = T[i], vars = gen(t.h, t.c);
  const themed = document.getElementById('themed');
  Object.entries(vars).forEach(([k,v]) => themed.style.setProperty(k, v));
  document.querySelectorAll('.swatch').forEach((s, j) => s.classList.toggle('active', j === i));
  buildScale(vars);
  updateOut(vars, t);
}

function updateOut(vars, t) {
  const G = [
    ['基底', ['--background','--foreground','--card','--card-foreground','--popover','--popover-foreground']],
    ['主色', ['--primary','--primary-foreground','--ring']],
    ['輔色', ['--secondary','--secondary-foreground','--muted','--muted-foreground','--accent','--accent-foreground']],
    ['功能色', ['--destructive','--border','--input']],
    ['Sidebar', ['--sidebar','--sidebar-foreground','--sidebar-primary','--sidebar-primary-foreground','--sidebar-accent','--sidebar-accent-foreground','--sidebar-border','--sidebar-ring']],
    ['圖表', ['--chart-1','--chart-2','--chart-3','--chart-4','--chart-5']],
  ];
  let h = `<span class="c">/* 莫蘭迪主題：${t.z} (${t.n}) */</span>\n<span class="c">/* 參考色：${t.hex} · hue ${t.h} */</span>\n\n:root {\n  <span class="p">--radius</span>: <span class="v">0.625rem</span>;\n`;
  G.forEach(([label, keys]) => {
    h += `\n  <span class="c">/* ${label} */</span>\n`;
    keys.forEach(k => { h += `  <span class="p">${k}</span>: <span class="v">${vars[k]}</span>;\n`; });
  });
  h += '}\n';
  document.getElementById('cssOut').innerHTML = h;
}

function copyCSS() {
  const t = T[cur], vars = gen(t.h, t.c);
  let css = `/* 莫蘭迪主題：${t.z} (${t.n}) */\n/* 參考色：${t.hex} · hue ${t.h} */\n\n:root {\n  --radius: 0.625rem;\n`;
  Object.entries(vars).forEach(([k,v]) => { css += `  ${k}: ${v};\n`; });
  css += '}\n';
  navigator.clipboard.writeText(css).then(() => {
    const b = document.getElementById('cpBtn');
    b.textContent = '已複製 ✓'; b.classList.add('ok');
    setTimeout(() => { b.textContent = '複製 CSS'; b.classList.remove('ok'); }, 2000);
  });
}

// Comparison
function buildCmp() {
  const rows = [['Primary','--primary'],['Background','--background'],['Sidebar','--sidebar'],['Accent','--accent'],['Border','--border'],['Chart 1','--chart-1']];
  let h = '<div class="cmp-grid"><div></div>';
  T.forEach(t => { h += `<div class="cmp-hdr">${t.z}${t.cur?'<span class="cmp-cur">目前使用</span>':''}</div>`; });
  rows.forEach(([l,k]) => {
    h += `<div class="cmp-label">${l}</div>`;
    T.forEach(t => { h += `<div class="cmp-cell" style="background:${gen(t.h,t.c)[k]}"></div>`; });
  });
  h += '</div>';
  document.getElementById('cmp').innerHTML = h;
}

sel(3);
buildCmp();
</script>
</body>
</html>
